<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Category Products | Sportswear Collection</title>
  <meta name="description" content="Browse our complete collection of sportswear products by category." />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="container">
      <div class="logo-container">
        <img src="asset/logo.png" alt="Sports Wear Logo" class="logo-image" />
      </div>
      
      <nav class="nav">
        <a href="index.html" class="nav-link">‚Üê Back to Home</a>
        <a href="#contact" class="nav-link">Contact</a>
      </nav>
    </div>
  </header>

  <!-- CATEGORY HERO -->
  <section class="category-hero">
    <div class="container">
      <h1 id="categoryTitle">Category Products</h1>
      <p id="categoryDescription">Browse our complete collection</p>
    </div>
  </section>

  <!-- PRODUCTS SECTION -->
  <section class="category-products">
    <div class="container">
      <div class="products-header">
        <div class="products-count">
          <span id="productsCount">0</span> products found
        </div>
      </div>
      
      <div class="product-grid" id="categoryProductGrid">
        <!-- Products will be dynamically loaded here -->
      </div>
    </div>
  </section>

  <!-- PRODUCT DETAIL MODAL -->
  <div id="productModal" class="product-modal">
    <div class="modal-overlay" onclick="closeProductModal()"></div>
    <div class="modal-content">
      <button class="modal-close" onclick="closeProductModal()">√ó</button>
      <div class="product-detail">
        <div class="product-images">
          <img id="modalProductImage" src="" alt="" class="main-product-image">
          <div class="product-thumbnails" id="productThumbnails"></div>
        </div>
        <div class="product-info">
          <h2 id="modalProductName"></h2>
          <p id="modalProductCategory" class="product-category"></p>
          <div id="modalProductDescription" class="product-description"></div>
          <div id="modalProductFeatures" class="product-features"></div>
          <div id="modalProductCare" class="product-care"></div>
          <div class="product-actions">
            <button class="explore-btn" onclick="window.close()">Close & Return to Home</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CONTACT SECTION -->
  <section class="contact" id="contact">
    <div class="container">
      <div class="contact-header">
        <h2>Get in Touch</h2>
        <p>Have questions about our sportswear collection? We're here to help!</p>
      </div>
      
      <div class="contact-content">
        <div class="contact-info">
          <div class="contact-item">
            <div class="contact-icon">üìß</div>
            <div>
              <h4>Email</h4>
              <p>info@headstrongcommerce.com</p>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">üìû</div>
            <div>
              <h4>Phone</h4>
              <p>+1-234-567-8900</p>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">üìç</div>
            <div>
              <h4>Address</h4>
              <p>123 Sports Street<br>Athletic City, AC 12345</p>
            </div>
          </div>
          <div class="contact-item">
            <div class="contact-icon">üïê</div>
            <div>
              <h4>Business Hours</h4>
              <p>Mon-Fri: 9AM-6PM<br>Sat-Sun: 10AM-4PM</p>
            </div>
          </div>
        </div>
        
        <form class="contact-form" onsubmit="handleContactSubmit(event)">
          <div class="form-row">
            <div class="form-group">
              <label for="name">Full Name *</label>
              <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
              <label for="email">Email Address *</label>
              <input type="email" id="email" name="email" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="phone">Phone Number</label>
              <input type="tel" id="phone" name="phone">
            </div>
            <div class="form-group">
              <label for="subject">Subject *</label>
              <select id="subject" name="subject" required>
                <option value="">Select a subject</option>
                <option value="general">General Inquiry</option>
                <option value="product">Product Information</option>
                <option value="order">Order Status</option>
                <option value="bulk">Bulk Orders</option>
                <option value="partnership">Partnership Opportunities</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="message">Message *</label>
            <textarea id="message" name="message" rows="4" required></textarea>
          </div>
          <button type="submit" class="submit-btn">Send Message</button>
        </form>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <p>¬© 2026 ZEBRO. All rights reserved.</p>
    </div>
  </footer>

  <script>
        // Global data storage
        let categoryProducts = [];
        let selectedCategory = '';

        // Image lazy loading with Intersection Observer
        let imageObserver;
        
        function setupImageObserver() {
            if ('IntersectionObserver' in window) {
                imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            const src = img.dataset.src;
                            if (src) {
                                img.src = src;
                                img.classList.remove('lazy');
                                img.classList.add('loaded');
                                observer.unobserve(img);
                            }
                        }
                    });
                }, {
                    rootMargin: '50px',
                    threshold: 0.1
                });
            }
        }

        // Create lazy loaded image element
        function createLazyImage(src, alt, className = '') {
            const img = document.createElement('img');
            img.dataset.src = src;
            img.alt = alt;
            img.className = `lazy ${className}`;
            
            // Add placeholder
            img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iI2Y3ZjdmNyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5Mb2FkaW5nLi4uPC90ZXh0Pjwvc3ZnPg==';
            
            if (imageObserver) {
                imageObserver.observe(img);
            } else {
                // Fallback for browsers without IntersectionObserver
                img.src = src;
                img.classList.add('loaded');
            }
            
            return img;
        }

        // Handle contact form submission
        function handleContactSubmit(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);
            
            // Create mailto link with form data
            const subject = encodeURIComponent(`${data.subject}`);
            const body = encodeURIComponent(
                `Name: ${data.name}\n` +
                `Email: ${data.email}\n` +
                `Phone: ${data.phone || 'Not provided'}\n` +
                `Subject: ${data.subject}\n\n` +
                `Message:\n${data.message}`
            );
            
            window.location.href = `mailto:info@headstrongcommerce.com?subject=${subject}&body=${body}`;
            event.target.reset();
        }

        // Initialize category page
        document.addEventListener('DOMContentLoaded', function() {
            setupImageObserver();
            // Load category data from localStorage
            selectedCategory = localStorage.getItem('selectedCategory') || 'Products';
            const storedProducts = localStorage.getItem('categoryProducts');
            
            if (storedProducts) {
                categoryProducts = JSON.parse(storedProducts);
            }
            
            // Update page title and description
            document.getElementById('categoryTitle').textContent = selectedCategory;
            document.getElementById('categoryDescription').textContent = getCategoryDescription(selectedCategory);
            document.getElementById('productsCount').textContent = categoryProducts.length;
            
            // Render products
            renderCategoryProducts();
        });

        // Get category description
        function getCategoryDescription(category) {
            const descriptions = {
                'Upper': 'T-Shirts, Jackets, Polo shirts and more',
                'Lower': 'Track pants, shorts, joggers and more',
                'Track Suits': 'Complete training sets and coordinated outfits',
                'Accessories': 'Caps, bags, water bottles and training gear',
                'Footwear': 'Running shoes, trainers and athletic footwear',
                'Training': 'Training equipment and fitness accessories'
            };
            return descriptions[category] || 'Premium sportswear and athletic gear';
        }

        // Render category products
        function renderCategoryProducts() {
            const productGrid = document.getElementById('categoryProductGrid');
            productGrid.innerHTML = '';
            
            if (categoryProducts.length === 0) {
                productGrid.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No products found in this category.</p>';
                return;
            }
            
            categoryProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // Create lazy loaded image
                const productImage = createLazyImage(getProductImage(product), product.name);
                productImage.loading = 'lazy';
                
                productCard.innerHTML = `
                    <div class="product-image-container">
                        <!-- Image will be inserted here -->
                    </div>
                    <h3>${product.name}</h3>
                    <a href="product.html?id=${product.id}" class="link">View Details</a>
                `;
                
                // Insert the lazy image into the container
                const imageContainer = productCard.querySelector('.product-image-container');
                imageContainer.appendChild(productImage);
                
                productGrid.appendChild(productCard);
            });
        }

        // View individual product
        function viewProduct(productId) {
            const product = categoryProducts.find(p => p.id === productId);
            if (!product) return;
            
            showProductModal(product);
        }

        // Show product modal
        function showProductModal(product) {
            const modal = document.getElementById('productModal');
            const modalImage = document.getElementById('modalProductImage');
            const modalName = document.getElementById('modalProductName');
            const modalCategory = document.getElementById('modalProductCategory');
            const modalDescription = document.getElementById('modalProductDescription');
            const modalFeatures = document.getElementById('modalProductFeatures');
            const modalCare = document.getElementById('modalProductCare');
            const thumbnails = document.getElementById('productThumbnails');
            
            // Set basic product info
            modalImage.src = getProductImage(product);
            modalImage.alt = product.name;
            modalName.textContent = product.name;
            modalCategory.textContent = product.category;
            
            // Set description
            if (product.description) {
                modalDescription.innerHTML = `<p>${product.description}</p>`;
            } else {
                modalDescription.innerHTML = '<p>Discover this premium sportswear product designed for athletes who demand excellence in performance and style.</p>';
            }
            
            // Set features
            if (product.features && product.features.length > 0) {
                modalFeatures.innerHTML = `
                    <h4>Features</h4>
                    <ul>
                        ${product.features.map(feature => `<li>${feature}</li>`).join('')}
                    </ul>
                `;
            } else {
                modalFeatures.innerHTML = `
                    <h4>Features</h4>
                    <ul>
                        <li>Premium quality materials</li>
                        <li>Advanced moisture-wicking technology</li>
                        <li>Ergonomic design for maximum comfort</li>
                        <li>Durable construction for long-lasting performance</li>
                    </ul>
                `;
            }
            
            // Set care instructions
            if (product.care) {
                modalCare.innerHTML = `
                    <h4>Care Instructions</h4>
                    <p>${product.care}</p>
                `;
            } else {
                modalCare.innerHTML = `
                    <h4>Care Instructions</h4>
                    <p>Machine wash cold with like colors. Tumble dry low. Do not bleach. Iron on low heat if needed.</p>
                `;
            }
            
            // Create thumbnails
            if (product.images && product.images.length > 1) {
                thumbnails.innerHTML = product.images.map((img, index) => 
                    `<img src="${product.folderPath}/${img}" alt="${product.name} - Image ${index + 1}" 
                     onclick="changeMainImage('${product.folderPath}/${img}')" 
                     class="${index === 0 ? 'active' : ''}">`
                ).join('');
            } else {
                thumbnails.innerHTML = '';
            }
            
            // Show modal
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        // Close product modal
        function closeProductModal() {
            const modal = document.getElementById('productModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Change main image in modal
        function changeMainImage(imageSrc) {
            const modalImage = document.getElementById('modalProductImage');
            const thumbnails = document.querySelectorAll('.product-thumbnails img');
            
            modalImage.src = imageSrc;
            
            // Update active thumbnail
            thumbnails.forEach(thumb => thumb.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Helper function to get product image
        function getProductImage(product) {
            if (product.images && product.images.length > 0) {
                const firstImage = product.images[0];
                if (firstImage.startsWith('/')) {
                    return firstImage;
                } else if (product.folderPath) {
                    return `${product.folderPath}/${firstImage}`;
                } else {
                    return firstImage;
                }
            }
            return `https://images.unsplash.com/photo-${Math.floor(Math.random() * 1000000000)}?w=400&h=300&fit=crop`;
        }

        // Header scroll effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('.header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
  </script>
</body>
</html>
